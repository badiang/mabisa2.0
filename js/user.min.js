/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2025 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

function validateEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}function delete_user(a){$.ajax({type:"POST",url:"../api/delete_user.php",async:!1,data:{val:a,delete:1},success:function(a){view_user()}})}function edit_user(a){$.ajax({type:"POST",url:"../api/edit_use.php",async:!1,data:{val:a,edit:1},success:function(a){$("#display_edit").html(a)}})}function view_user(){$.ajax({type:"POST",url:"../api/view_user.php",async:!1,data:{view:1},success:function(a){$("#user_dataTable").html(a)}})}function saveUser(){$ok=1,$country=$("#country").val(),$region=$("#region").val(),$province=$("#province").val(),$city=$("#city").val(),$barangay=$("#barangay").val(),$username=$("#username_brgy").val(),$password=$("#password").val(),$email=$("#new_email").val(),phone=$("#phone").val(),""!=($account_type=$("#account_type").val())&&null!=$account_type||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Account Type cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),"+"==phone[0]&&"6"==phone[1]&&"3"==phone[2]&&"9"==phone[3]||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Invalid Phone Number Format.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),0==validateEmail($email)&&($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Invalid Email format.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$email&&null!=$email||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Email cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),$password.length<8&&($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Password must atleast 8 letters or numbers.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$password&&null!=$password||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Password cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$username&&null!=$username||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Username cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$barangay&&null!=$barangay||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Barangay cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$city&&null!=$city||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> City cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$province&&null!=$province||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Province cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$region&&null!=$region||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Region cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$country&&null!=$country||($("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Country cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),1==$ok&&$.ajax({type:"POST",url:"../actions/dashboard/user/save_user.php",async:!1,data:{country:$country,region:$region,province:$province,city:$city,barangay:$barangay,username:$username,password:$password,email:$email,account_type:$account_type,phone:phone,save:1},success:function(a){1==a?($("#alert").html('<div class="alert alert-success alert-dismissible fade show" role="alert"><strong>Success!</strong> User Successfully Saved.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),view_user()):$("#alert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> You can Only Create 1(one) Account per Barangay.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>')}})}function updateUser(){$ok=1,$country=$("#ecountry").val(),$region=$("#eregion").val(),$province=$("#eprovince").val(),$city=$("#ecity").val(),$barangay=$("#ebarangay").val(),$id=$("#id").val(),$username=$("#eusername").val(),$password=$("#epassword").val(),$email=$("#eemail").val(),ephone=$("#ephone").val(),""!=($account_type=$("#eaccount_type").val())&&null!=$account_type||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Account Type cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),"+"==ephone[0]&&"6"==ephone[1]&&"3"==ephone[2]&&"9"==ephone[3]||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Invalid Phone Number Format.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),0==validateEmail($email)&&($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Invalid Email format.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$email&&null!=$email||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Email cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),$password<8&&($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Password must atleast 8 letters or numbers.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$password&&null!=$password||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Password cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$username&&null!=$username||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Username cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$barangay&&null!=$barangay||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Barangay cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$city&&null!=$city||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> City cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$province&&null!=$province||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Province cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$region&&null!=$region||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Region cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),""!=$country&&null!=$country||($("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Country cannot be empty.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),$ok=0),1==$ok&&$.ajax({type:"POST",url:"../actions/dashboard/user/update.php",async:!1,data:{country:$country,region:$region,province:$province,city:$city,barangay:$barangay,id:$id,username:$username,password:$password,email:$email,phone:ephone,account_type:$account_type,update:1},success:function(a){1==a?($("#ealert").html('<div class="alert alert-success alert-dismissible fade show" role="alert"><strong>Success!</strong> Update Successfully.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>'),view_user()):$("#ealert").html('<div class="alert alert-danger alert-dismissible fade show" role="alert"><strong>Error!</strong> Update failed.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>')}})}