/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2025 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

document.querySelector("#role").addEventListener("change",e=>{var e=e.target.value,t=document.querySelector("#barangayDiv"),n=document.querySelector("#barangay");2==e?(t.style.display="block",n.setAttribute("required","true")):(t.style.display="none",n.removeAttribute("required"))}),document.getElementById("passEye").addEventListener("click",function(){var e=document.getElementById("pass"),t=this.querySelector("i");"password"===e.type?(e.type="text",t.classList.remove("fa-eye"),t.classList.add("fa-eye-slash")):(e.type="password",t.classList.remove("fa-eye-slash"),t.classList.add("fa-eye"))}),document.getElementById("confirmPassEye").addEventListener("click",function(){var e=document.getElementById("confirmPass"),t=this.querySelector("i");"password"===e.type?(e.type="text",t.classList.remove("fa-eye"),t.classList.add("fa-eye-slash")):(e.type="password",t.classList.remove("fa-eye-slash"),t.classList.add("fa-eye"))}),document.addEventListener("click",async e=>{var t,n,a,s,o;e.target.classList.contains("edit-user-btn")?(n=(t=document.getElementById("modalLabel")).textContent,t.textContent="Edit User",s=(a=document.getElementById("passwordLabel")).textContent,a.textContent="New Password",new bootstrap.Modal(document.getElementById("crud-user")).show(),o=e.target.dataset.id,await fetch("../api/get_user.php?id="+o).then(e=>e.json()).then(e=>{console.log("Data is: "+JSON.stringify(e));let t=e;document.getElementById("fullName").value=t.fullName||"",document.getElementById("username").value=t.email||"",document.getElementById("email").value=t.email||"",document.getElementById("mobileNum").value=t.mobileNo||"",document.getElementById("pass").value=t.password||"",document.getElementById("confirmPass").value=t.password||"";var n=document.getElementById("role"),a=n.options;for(let e=0;e<a.length;e++)if("Select one"===a[e].text){n.remove(e);break}var e=Array.from(n.options).find(e=>e.text===t.role),e=(e&&(e.selected=!0),document.getElementById("barangay")),s=document.getElementById("barangayDiv");t.barangay&&"N/A"!==t.barangay?(s.style.display="inline-block",(s=Array.from(e.options).find(e=>e.text===t.barangay))&&(e.remove(e.selectedIndex),s.selected=!0)):(s=Array.from(e.options).find(e=>"Select one"===e.text))&&e.remove(s.index),document.getElementById("loadingSpinner").classList.remove("d-flex"),document.getElementById("loadingSpinner").classList.add("d-none"),document.getElementById("modal-content").classList.remove("d-none")}).catch(e=>{console.error("Error fetching data:",e),document.getElementById("loadingSpinner").classList.remove("d-flex"),document.getElementById("loadingSpinner").classList.add("d-none"),document.getElementById("modal-content").classList.remove("d-none")}),t.textContent=n,a.textContent=s):e.target.classList.contains(".add-user-btn")&&new bootstrap.Modal(document.getElementById("crud-user")).show()});